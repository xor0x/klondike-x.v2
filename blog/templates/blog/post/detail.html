
{% extends 'blog/base.html' %}
{% load blog_tags %}
{% block title %}
- {{ post.title }}
{% endblock %}

{% block content %}

  <div class="entity_wrapper">
      <div class="entity_title">
          <h1><a href="#">{{ post.title }}</a></h1>
      </div>
      <!-- entity_title -->

      <div class="entity_meta"><a href="#" target="_self">{{ post.publish }}</a>, by: <a href="#" target="_self">{{ post.author }}</a>
      </div>

      <div class="entity_social">
    <a href="#" class="icons-sm sh-ic">
        <i class="fa fa-share-alt"></i>
        <a href="{% url "blog:post_share" post.id %}">
        Share this post
        </a>
    </a>
</div>
<!-- entity_social -->


      <div class="entity_thumb">
          <img class="img-responsive" src="{{ post.image.url }}" height="200" width="350" alt="feature-top">
      </div>
      <!-- entity_thumb -->

      <div class="entity_content">
          <p>
              {{ post.body | safe }}
          </p>
      </div>
      <!-- entity_content -->

      <div class="entity_footer">
          <div class="entity_tag">
            {% for tag in post.tags.all %}
            <span class="blank"><a href="{% url 'blog:post_list_by_tag' tag.slug %}">{{ tag.name }}</a></span>
            {% if not forloop.last %} {% endif %}
            {% endfor %}
          </div>
          <!-- entity_tag -->


          <div class="entity_social">
              <span><i class="fa fa-comments-o"></i>{{ post.comments.count }} <a href="#">Comments</a> </span>
          </div>
          <!-- entity_social -->


      </div>
      <!-- entity_footer -->

  </div>
  <!-- entity_wrapper -->
  <br>
  <h2>Similar posts</h2>
  {% for post in similar_posts %}
  <p>
  <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
  </p>
  {% empty %}
  There are no similar posts yet.
  {% endfor %}

  <div class="readers_comment">
    <div class="entity_inner__title header_purple">
        {% with comments.count as total_comments %}
        <h2>
        {{ total_comments }} Comments {{ total_comments|pluralize }}
        </h2>
        {% endwith %}
    </div>
    <!-- entity_title -->
    	{% if user.is_authenticated %}
    {% for comment in post.comments.all %}
    <div class="media">
        <div class="media-body">
            <h2 class="media-heading"> Comment {{ forloop.counter }} by {{ comment.author }}</a></h2>
            <div class="date">{{ comment.created_date }}</div>
            {{ comment.body|linebreaks }}
            {% empty %}
            <h2>No comments</h2>
        </div>
    </div>
    {% endfor %}


    <div class="entity_comments">
    <div class="entity_inner__title header_black">
        <h2>Add a Comment</h2>
    </div>
    <!--Entity Title -->

    <div class="entity_comment_from">
      {% if empty %}
      <div class="container">
        <div class="alert alert-danger" role="alert">
          Enter
        </div>
      </div>
      <br>
      {% endif %}
      <form action="." method="post">
      {{ comment_form.as_p }}
      {% csrf_token %}
      <p><input type="submit" value="Add comment"></p>
    </div>
    <!--Entity Comments From -->
    {% else %}
    <h2>Please <a href="{% url 'signup' %}" class="genric-btn success-border circle">Signup</a> to view/add comments</h2>
    {% endif %}
</div>

</div>
{% endblock %}
